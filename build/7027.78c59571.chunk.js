"use strict";(self.webpackChunkblog_backend=self.webpackChunkblog_backend||[]).push([[7027],{27887:(F,h,e)=>{e.d(h,{r:()=>D});var d=e(67294),m=e(45697),g=e.n(m),R=e(99168),v=e(41580);function P(p,O,f){if(!p||!O)return{display:"none"};const{x:E,y:M}=f;return{transform:`translate(${E}px, ${M}px)`}}function D({renderItem:p}){const{itemType:O,isDragging:f,item:E,initialOffset:M,currentOffset:b,mouseOffset:U}=(0,R.useDragLayer)(I=>({item:I.getItem(),itemType:I.getItemType(),initialOffset:I.getInitialSourceClientOffset(),currentOffset:I.getSourceClientOffset(),isDragging:I.isDragging(),mouseOffset:I.getClientOffset()}));return f?d.createElement(v.x,{height:"100%",left:0,position:"fixed",pointerEvents:"none",top:0,zIndex:100,width:"100%"},d.createElement(v.x,{style:P(M,b,U)},p({type:O,item:E}))):null}D.propTypes={renderItem:g().func.isRequired}},99781:(F,h,e)=>{var d=e(67294);const m=(0,d.createContext)();var g=null},75642:(F,h,e)=>{e.d(h,{PL:()=>v,Y9:()=>o.Y,zE:()=>X,Ky:()=>ue,fi:()=>Y,zH:()=>l,r5:()=>me});var d=e(67294),m=e(86706),g=e(21323);const v=()=>{const s=(0,m.v9)(g.Z),t=(0,d.useCallback)(n=>s?.components?.[n]??{},[s]);return{...s,getComponentLayout:t}};var P=e(52861),D=e(87631),p=e(50361),O=e.n(p),f=e(27361),E=e.n(f),M=e(36968),b=e.n(M),U=e(13920);const I=(s,t)=>t.find(n=>n.uid===s),j=(s,t)=>{const n=K(s,t),a=V(n.contentType,t),u=J(n.contentType,n.components);return b()(n,["contentType","layouts","edit"],a),b()(n,["contentType","layouts","list"],u),Object.keys(n.components).forEach(i=>{const T=V(n.components[i],t);b()(n,["components",i,"layouts","edit"],T)}),n},K=(s,t)=>{const n=(0,U.w8)(O()(s),t,"contentType"),{components:a,contentType:u}=n,i=T=>Object.keys(T.metadatas).reduce((A,k)=>{const S=E()(T,["attributes",k],{});let x=T.metadatas[k];if(S.type==="relation"){const fe=I(S.targetModel,t),N=x.edit.mainField,$={name:N,schema:E()(fe,["attributes",N])};x={list:{...x.list,mainField:$},edit:{...x.edit,mainField:$}}}return A[k]=x,A},{});return b()(n,["contentType","metadatas"],i(u)),Object.keys(a).forEach(T=>{const A=a[T],k=i(A);b()(n,["components",T,"metadatas"],k)}),n},V=(s,t)=>s.layouts.edit.reduce((n,a)=>{const u=a.map(i=>{const T=E()(s,["attributes",i.name],{}),A={...i,fieldSchema:T,metadatas:E()(s,["metadatas",i.name,"edit"],{})};if(T.type==="relation"){const S=I(T.targetModel,t).pluginOptions||{};b()(A,"targetModelPluginOptions",S),b()(A,"queryInfos",{shouldDisplayRelationLink:ne(s,i.name,t)})}return A});return n.push(u),n},[]),J=(s,t)=>s.layouts.list.reduce((a,u)=>{const i=E()(s,["attributes",u],{}),T=E()(s,["metadatas",u,"list"],{}),A=i.type;if(A==="relation")return a.push({key:`__${u}_key__`,name:u,fieldSchema:i,metadatas:T}),a;if(A==="component"){const k=t[i.component],S=k.settings.mainField,x=k.attributes[S];return a.push({key:`__${u}_key__`,name:u,fieldSchema:i,metadatas:{...T,mainField:{...x,name:S}}}),a}return a.push({key:`__${u}_key__`,name:u,fieldSchema:i,metadatas:T}),a},[]),ne=(s,t,n)=>{const a=E()(s,["attributes",t,"targetModel"],"");return _(n).includes(a)},_=s=>s.filter(t=>t.isDisplayed).map(({uid:t})=>t),Q=j;var z=e(18172);const W={error:null,isLoading:!0,layout:{},layouts:{}},G=(s,t)=>(0,z.ZP)(s,n=>{switch(t.type){case"GET_DATA":{n.isLoading=!0,n.error=null,n.layout={};break}case"GET_DATA_SUCCEEDED":{const a=t.data.contentType.uid;n.layout=t.data,n.layouts[a]=t.data,n.isLoading=!1;break}case"GET_DATA_ERROR":{n.isLoading=!1,n.error=t.error;break}case"SET_LAYOUT_FROM_STATE":{n.error=null,n.layout=s.layouts[t.uid];break}case"UPDATE_LAYOUT":{const a=s.layout;n.layout={...a,contentType:{uid:a.contentType.uid,...t.newLayout.contentType}},n.layouts[a.contentType.uid]={...a,contentType:{uid:a.contentType.uid,...t.newLayout.contentType}};break}default:return n}});var B=e(84668);const X=s=>{const[{error:t,isLoading:n,layout:a,layouts:u},i]=(0,d.useReducer)(G,W),T=(0,d.useMemo)(B.Vo,[]),{schemas:A}=(0,m.v9)(N=>T(N),m.wU),k=(0,d.useRef)(!0),{get:S}=(0,D.kY)(),x=(0,d.useCallback)(async(N,$)=>{if(u[N]){i({type:"SET_LAYOUT_FROM_STATE",uid:N});return}i({type:"GET_DATA"});try{const{data:{data:te}}=await S(`/content-manager/content-types/${N}/configuration`,{cancelToken:$.token});i({type:"GET_DATA_SUCCEEDED",data:Q(te,A)})}catch(te){if(P.default.isCancel(te))return;k.current&&console.error(te),k.current&&i({type:"GET_DATA_ERROR",error:te})}},[u,A,S]);(0,d.useEffect)(()=>()=>{k.current=!1},[]),(0,d.useEffect)(()=>{const $=P.default.CancelToken.source();return x(s,$),()=>{$.cancel("Operation canceled by the user.")}},[s,x]);const fe=(0,d.useCallback)(N=>{i({type:"UPDATE_LAYOUT",newLayout:Q(N,A)})},[A]);return{error:t,isLoading:n,layout:a,updateLayout:fe}},H=s=>s["content-manager_app"].collectionTypeLinks;var Z=e(80129),re=e(13218),ye=e.n(re);const oe=(s,t)=>Object.keys(s).reduce((n,a)=>{const u=s[a],i=E()(t,[a],u);return ye()(u)?{...n,[a]:oe(u,i)}:(n[a]=i,n)},{}),ge=(s,t,n)=>{const a=s.find(({to:x})=>x.includes(t));if(!a)return"/";const{to:u,search:i}=a,T=(0,Z.parse)(i),A=(0,Z.parse)(n.substring(1)),k=oe(T,A);return`${u}?${(0,Z.stringify)(k,{encode:!1})}`},ue=s=>{const[{rawQuery:t}]=(0,D.Kx)(),n=(0,m.v9)(H);return ge(n,s,t)};var ce=e(16550);const Y=()=>{const{search:s}=(0,ce.TH)(),t=s?(0,Z.parse)(s.substring(1)):{};return t.plugins?(0,Z.stringify)({plugins:t.plugins},{encode:!1}):""};var ae=e(80015);const w=(s,t,n)=>({type:ae.m,permissions:s,__meta__:{plugins:t,containerName:n}}),C=()=>({type:ae.Q}),ee=s=>s["content-manager_rbacManager"].permissions,de=s=>s.rbacProvider.collectionTypesRelatedPermissions,me=(s,t,n="listView")=>{const a=(0,m.v9)(de),u=(0,m.v9)(ee),i=(0,m.I0)(),T=a[t];return(0,d.useEffect)(()=>T?(i(w(T,s?s.plugins:null,n)),()=>{i(C())}):()=>{},[T,i,s,n]),u};var Te=e(99781);const r=()=>useContext(WysiwygContext),c=null,l=s=>{const t=(0,d.useRef)();return(0,d.useEffect)(()=>{t.current=s},[s]),t.current};var o=e(15699),y=e(40703)},15699:(F,h,e)=>{e.d(h,{Y:()=>v});var d=e(67294),m=e(99168),g=e.n(m),R=e(40703);const v=(P,{type:D="STRAPI_DND",index:p,item:O={},onStart:f,onEnd:E,onGrabItem:M,onDropItem:b,onCancel:U,onMoveItem:I,dropSensitivity:j="regular"})=>{const K=(0,d.useRef)(null),[{handlerId:V},J]=(0,m.useDrop)({accept:D,collect(W){return{handlerId:W.getHandlerId()}},hover(W,se){if(!K.current)return;const G=W.index,B=p;if(G!==B){if(j==="regular"){const q=K.current.getBoundingClientRect(),X=(q.bottom-q.top)/2,H=se.getClientOffset().y-q.top;if(G<B&&H<X||G>B&&H>X)return}I(B,G),W.index=B}}}),[{isDragging:ne},_,Q]=(0,m.useDrag)({type:D,item(){f&&f();const{width:W}=K.current?.getBoundingClientRect()??{};return{index:p,width:W,...O}},end(){E&&E()},canDrag:P,isDragging:O.id?W=>O.id===W.getItem().id:void 0,collect:W=>({isDragging:W.isDragging()})}),z=(0,R.A)(P,p,{onGrabItem:M,onDropItem:b,onCancel:U,onMoveItem:I});return[{handlerId:V,isDragging:ne,handleKeyDown:z},K,J,_,Q]}},40703:(F,h,e)=>{e.d(h,{A:()=>m});var d=e(67294);const m=(g,R,{onCancel:v,onDropItem:P,onGrabItem:D,onMoveItem:p})=>{const[O,f]=(0,d.useState)(!1),E=I=>{O&&(I==="UP"?p(R-1,R):I==="DOWN"&&p(R+1,R))},M=()=>{O?(P&&P(R),f(!1)):(D&&D(R),f(!0))},b=()=>{O&&(f(!1),v&&v(R))};return I=>{if(g&&!(I.key==="Tab"&&!O))switch(I.preventDefault(),I.key){case" ":case"Enter":M();break;case"Escape":b();break;case"ArrowDown":case"ArrowRight":E("DOWN");break;case"ArrowUp":case"ArrowLeft":E("UP");break;default:}}}},84668:(F,h,e)=>{e.d(h,{Jg:()=>p,KQ:()=>P,Vo:()=>D,Yg:()=>g});var d=e(20573),m=e(14506);const g=()=>f=>f["content-manager_app"]||m.E,R=()=>createSelector(g(),f=>f),v=()=>createSelector(g(),f=>f.models),P=()=>(0,d.P1)(g(),f=>({collectionTypeLinks:f.collectionTypeLinks,singleTypeLinks:f.singleTypeLinks})),D=()=>(0,d.P1)(g(),({components:f,models:E})=>({schemas:[...f,...E]})),p=(0,d.P1)(g(),f=>f.fieldSizes);var O=null},21323:(F,h,e)=>{e.d(h,{Z:()=>m});const m=g=>g["content-manager_editViewLayoutManager"].currentLayout},56723:(F,h,e)=>{e.d(h,{Z:()=>d});const d={COMPONENT:"component",EDIT_FIELD:"editField",FIELD:"field",DYNAMIC_ZONE:"dynamicZone",RELATION:"relation"}},69881:(F,h,e)=>{e.d(h,{Z:()=>m});const m=g=>`content-manager.${g}`},13920:(F,h,e)=>{e.d(h,{_Q:()=>H.Z,W3:()=>R,ko:()=>p,FE:()=>f,Di:()=>U,Ex:()=>Te,du:()=>V,TA:()=>_,Ts:()=>se,Uo:()=>B,IF:()=>X,OB:()=>le.Z,w8:()=>oe,kc:()=>pe});var d=e(50361),m=e.n(d);const R=(r,c,l)=>{if(Array.isArray(r)&&c>=0&&l>=0&&c<=r.length-1&&l<=r.length-1){const o=m()(r),y=o.splice(c,1);return o.splice(l,0,y[0]),o}return r};var v=e(7334),P=e.n(v);const p=r=>{const c=r.type;return c==="relation"?!P()(r.relationType).includes("morph"):!["json","dynamiczone","richtext","password"].includes(c)&&!!c},O=(r,c)=>{typeof r=="function"?r(c):r!=null&&(r.current=c)},f=(...r)=>c=>r.forEach(l=>O(l,c));var E=e(27361),M=e.n(E);const b=(r,c)=>Object.keys(r).reduce((l,o)=>{const y=M()(r,[o],{}),{default:s,component:t,type:n,required:a,min:u,repeatable:i}=y;if(s!==void 0&&(l[o]=s),n==="component"){const T=c?.[t]?.attributes??{},A=b(T,c);if(a===!0&&(l[o]=i===!0?[]:A),u&&i===!0&&a){l[o]=[];for(let k=0;k<u;k+=1)l[o].push(A)}}return n==="dynamiczone"&&a===!0&&(l[o]=[]),l},{}),U=b;var I=e(57557),j=e.n(I);const V=({layouts:r,metadatas:c,...l})=>{const o=r.list.map(t=>t.name?t.name:t),y=Object.keys(c).reduce((t,n)=>{const a=M()(c,[n],{});let u=a.edit;return u.mainField&&(u={...u,mainField:a.edit.mainField.name}),{...t,[n]:{edit:u,list:j()(a.list,["mainField"])}}},{}),s=r.edit.map(t=>t.map(({name:n,size:a})=>({name:n,size:a})));return{...l,layouts:{edit:s,list:o},metadatas:y}},J=(r,c)=>r.map(l=>({...l,subject:c})),_=r=>{const c={create:[{action:"plugin::content-manager.explorer.create",subject:null}],delete:[{action:"plugin::content-manager.explorer.delete",subject:null}],publish:[{action:"plugin::content-manager.explorer.publish",subject:null}],read:[{action:"plugin::content-manager.explorer.read",subject:null}],update:[{action:"plugin::content-manager.explorer.update",subject:null}]};return Object.keys(c).reduce((l,o)=>(l[o]=J(c[o],r),l),{})};var Q=e(7654),z=e.n(Q);const se=r=>r.split(".").filter(c=>z()(parseInt(c,10))),B=r=>{if(r.length===0)return-1;const c=Math.max.apply(Math,r.map(l=>l.__temp_key__??0));return Number.isNaN(c)?-1:c},X=r=>`/content-manager/${r}`;var le=e(69881),H=e(56723),Z=e(36968),re=e.n(Z);const oe=(r,c,l)=>{const o=n=>c.find(a=>a.uid===n),y=Object.assign({},r),s=r[l].uid,t=o(s);return re()(y,[l],{...r[l],...t}),Object.keys(r.components).forEach(n=>{const a=o(n);re()(y,["components",n],{...r.components[n],...a})}),y};var L=e(87631);const pe=(r,c,l)=>{const o=(y,s)=>Object.keys(y).reduce((t,n)=>{const a=(0,L.UN)(s,n),u=M()(y,n),i=(0,L.k2)(s,[n,"component"]),T=(0,L.k2)(s,[n,"repeatable"]);return a==="dynamiczone"?(t[n]=u.map(A=>o(A,l[A.__component])),t):a==="component"?(T?t[n]=u&&u.map(A=>o(A,l[i])):t[n]=u&&o(u,l[i]),t):(a!=="password"&&(t[n]=u),t)},{});return o(r,c)};var ue=e(51584),ce=e.n(ue),Ee=e(41609),Y=e.n(Ee),ae=e(14841),w=e.n(ae),C=e(87561),ee=e(24056);C.kM(C.nK,"defined",function(){return this.test("defined",L.I0.required,r=>r!==void 0)}),C.kM(C.IX,"notEmptyMin",function(r){return this.test("notEmptyMin",L.I0.min,c=>Y()(c)?!0:c.length>=r)}),C.kM(C.Z_,"isInferior",function(r,c){return this.test("isInferior",r,function(l){return!l||Number.isNaN(w()(l))?!0:w()(c)>=w()(l)})}),C.kM(C.Z_,"isSuperior",function(r,c){return this.test("isSuperior",r,function(l){return!l||Number.isNaN(w()(l))?!0:w()(l)>=w()(c)})});const de=r=>M()(r,["attributes"],{}),ie=(r,{components:c},l={isCreatingEntry:!0,isDraft:!0,isFromComponent:!1})=>{const o=de(r);return C.Ry().shape(Object.keys(o).reduce((y,s)=>{const t=o[s];if(t.type!=="relation"&&t.type!=="component"&&t.type!=="dynamiczone"){const n=me(t.type,t,l);y[s]=n}if(t.type==="relation"&&(y[s]=["oneWay","oneToOne","manyToOne","oneToManyMorph","oneToOneMorph"].includes(t.relationType)?C.Ry().nullable():C.IX().nullable()),t.type==="component"){const n=ie(c[t.component],{components:c},{...l,isFromComponent:!0});if(t.repeatable===!0){const{min:u,max:i,required:T}=t;let A=C.Vo(k=>{let S=C.IX().of(n);return u?T?S=S.min(u,L.I0.min):T!==!0&&Y()(k)?S=S.nullable():S=S.min(u,L.I0.min):T&&!l.isDraft&&(S=S.min(1,L.I0.required)),i&&(S=S.max(i,L.I0.max)),S});return y[s]=A,y}const a=C.Vo(u=>u!==void 0?t.required===!0&&!l.isDraft?n.defined():n.nullable():t.required===!0?C.Ry().defined():C.Ry().nullable());return y[s]=a,y}if(t.type==="dynamiczone"){let n=C.IX().of(C.Vo(({__component:i})=>ie(c[i],{components:c},{...l,isFromComponent:!0})));const{max:a,min:u}=t;u?t.required?n=n.test("min",L.I0.min,i=>l.isCreatingEntry?i&&i.length>=u:i===void 0?!0:i!==null&&i.length>=u).test("required",L.I0.required,i=>l.isCreatingEntry?i!==null||i!==void 0:i===void 0?!0:i!==null):n=n.notEmptyMin(u):t.required&&!l.isDraft&&(n=n.test("required",L.I0.required,i=>l.isCreatingEntry?i!==null||i!==void 0:i===void 0?!0:i!==null)),a&&(n=n.max(a,L.I0.max)),y[s]=n}return y},{}))},me=(r,c,l)=>{let o=C.nK();return["string","uid","text","richtext","email","password","enumeration"].includes(r)&&(o=C.Z_()),r==="json"&&(o=C.nK(L.I0.json).test("isJSON",L.I0.json,y=>{if(!y||!y.length)return!0;try{return JSON.parse(y),!0}catch{return!1}}).nullable().test("required",L.I0.required,y=>!(c.required&&(!y||!y.length)))),r==="email"&&(o=o.email(L.I0.email)),["number","integer","float","decimal"].includes(r)&&(o=C.Rx().transform(y=>z()(y)?void 0:y).typeError()),r==="biginteger"&&(o=C.Z_().matches(/^-?\d*$/)),["date","datetime"].includes(r)&&(o=C.hT()),Object.keys(c).forEach(y=>{const s=c[y];if(s||!ce()(s)&&Number.isInteger(Math.floor(s))||s===0)switch(y){case"required":{l.isDraft||(r==="password"&&l.isCreatingEntry&&(o=o.required(L.I0.required)),r!=="password"&&(l.isCreatingEntry?o=o.required(L.I0.required):o=o.test("required",L.I0.required,t=>t===void 0&&!l.isFromComponent?!0:(0,ee.Z)(r)?t===0?!0:!!t:r==="boolean"?t!=null:r==="date"||r==="datetime"?typeof t=="string"?!Y()(t):!Y()(t?.toString()):!Y()(t))));break}case"max":{r==="biginteger"?o=o.isInferior(L.I0.max,s):o=o.max(s,L.I0.max);break}case"maxLength":o=o.max(s,L.I0.maxLength);break;case"min":{r==="biginteger"?o=o.isSuperior(L.I0.min,s):o=o.min(s,L.I0.min);break}case"minLength":{l.isDraft||(o=o.min(s,L.I0.minLength));break}case"regex":o=o.matches(new RegExp(s),{message:L.I0.regex,excludeEmptyString:!c.required});break;case"lowercase":["text","textarea","email","string"].includes(r)&&(o=o.strict().lowercase());break;case"uppercase":["text","textarea","email","string"].includes(r)&&(o=o.strict().uppercase());break;case"positive":(0,ee.Z)(r)&&(o=o.positive());break;case"negative":(0,ee.Z)(r)&&(o=o.negative());break;default:o=o.nullable()}}),o},Te=ie},24056:(F,h,e)=>{e.d(h,{Z:()=>d});function d(m){return["integer","biginteger","decimal","float","number"].includes(m)}},75194:(F,h,e)=>{e.d(h,{K:()=>p});var d=e(67294),m=e(45697),g=e.n(m),R=e(5079),v=e(11047),P=e(75515),D=e(13037);function p({children:O,...f}){const{color:E}=f.data,{themeColorName:M}=(0,D.k)(E);return d.createElement(R.c.Option,{...f},d.createElement(v.k,{alignItems:"center",gap:2},d.createElement(v.k,{height:2,background:E,borderColor:M==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2}),d.createElement(P.Z,{textColor:"neutral800",ellipsis:!0},O)))}p.propTypes={children:g().node.isRequired,data:g().shape({color:g().string}).isRequired}},54878:(F,h,e)=>{e.d(h,{R:()=>p});var d=e(67294),m=e(45697),g=e.n(m),R=e(5079),v=e(11047),P=e(75515),D=e(13037);function p({children:O,...f}){const{color:E}=f.data,{themeColorName:M}=E?(0,D.k)(E):{};return d.createElement(R.c.SingleValue,{...f},d.createElement(v.k,{alignItems:"center",gap:2},d.createElement(v.k,{height:2,background:E,borderColor:M==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2}),d.createElement(P.Z,{textColor:"neutral800",ellipsis:!0},O)))}p.defaultProps={children:null},p.propTypes={children:g().node,data:g().shape({color:g().string}).isRequired}},53616:(F,h,e)=>{e.d(h,{$k:()=>D,FT:()=>O,Nj:()=>P,Ot:()=>v,QM:()=>g,lv:()=>p,sN:()=>m,uL:()=>f,x4:()=>R});var d=e(42675);const m="settings_review-workflows",g="Settings/Review_Workflows/SET_WORKFLOWS",R="Settings/Review_Workflows/WORKFLOW_DELETE_STAGE",v="Settings/Review_Workflows/WORKFLOW_ADD_STAGE",P="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE",D="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE_POSITION",p={primary600:"Blue",primary200:"Lilac",alternative600:"Violet",alternative200:"Lavender",success600:"Green",success200:"Pale Green",danger500:"Cherry",danger200:"Pink",warning600:"Orange",warning200:"Yellow",secondary600:"Teal",secondary200:"Baby Blue",neutral400:"Gray",neutral0:"White"},O=d.W.colors.primary600,f={STAGE:"stage"}},53752:(F,h,e)=>{e.d(h,{n:()=>v});var d=e(88767),m=e(87631),g=e(80129),R=e.n(g);function v(P={}){const{id:D="",...p}=P,O={populate:"stages"},{get:f}=(0,m.kY)(),E=(0,g.stringify)({...O,...p},{encode:!1}),{data:M,isLoading:b,status:U,refetch:I}=(0,d.useQuery)(["review-workflows","workflows",D],async()=>{try{const{data:{data:K}}=await f(`/admin/review-workflows/workflows/${D}${E?`?${E}`:""}`);return K}catch{return null}});let j=[];return D&&M?j=[M]:Array.isArray(M)&&(j=M),{workflows:j,isLoading:b,status:U,refetch:I}}},13037:(F,h,e)=>{e.d(h,{k:()=>g,s:()=>R});var d=e(42675),m=e(53616);function g(v){if(!v)return null;const D=Object.entries(d.W.colors).filter(([,p])=>p.toUpperCase()===v.toUpperCase()).reduce((p,[O])=>(m.lv?.[O]&&(p=O),p),null);return D?{themeColorName:D,name:m.lv[D]}:null}function R(){return Object.entries(m.lv).map(([v,P])=>({hex:d.W.colors[v].toUpperCase(),name:P}))}}}]);
